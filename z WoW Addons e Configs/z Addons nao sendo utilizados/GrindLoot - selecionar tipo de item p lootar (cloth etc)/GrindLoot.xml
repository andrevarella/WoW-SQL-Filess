<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
<Script file="GrindLoot.lua"/>

<Frame name="GrindLootOptionsControlsPanel" hidden="false" parent="InterfaceOptionsFramePanelContainer">
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentTitle" text="Grind Loot" inherits="GameFontNormalLarge" justifyH="LEFT" justifyV="TOP">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="16" y="-16"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentSubText" text="Grind Loot will assist you in looting while you grind. Please note that this was not created with casual play in mind, there is a strong possibility to mess looting, specially with skinning mode active." inherits="GameFontHighlightSmall" nonspacewrap="true" maxLines="3" justifyH="LEFT" justifyV="TOP">
					<Size>
						<AbsDimension y="32" x="0"/>
					</Size>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentTitle" relativePoint="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="0" y="-8"/>
							</Offset>
						</Anchor>
						<Anchor point="RIGHT">
							<Offset>
								<AbsDimension x="-32" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton name="$parentUseGrindLoot" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentSubText" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="-2" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX;
						self.GetValue = Get_useGrindLoot;
						self.label = "useGrindLoot";
						self.setFunc = GrindLoot_EnableDisable_Update;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentFastMining" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentUseGrindLoot" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX;
						self.GetValue = Get_miningLoot;
						self.label = "miningLoot";
						self.setFunc = GrindLoot_MiningMode_Update;
						self.defaultValue = 1;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
					</OnLoad>
				</Scripts>			
			</CheckButton>
			<CheckButton name="$parentSkinningMode" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentFastMining" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX;
						self.GetValue = Get_skinningLoot;
						self.label = "skinningLoot";
						self.setFunc = GrindLoot_SkinningMode_Update;
						self.defaultValue = 0;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentFishingModeAlpha" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentSkinningMode" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX;
						self.GetValue = Get_fishingMode1;
						self.label = "fishingMode1";
						self.setFunc = GrindLoot_FishingModeAlpha_Update;
						self.defaultValue = 1;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
					</OnLoad>
				</Scripts>
			</CheckButton>			
			<CheckButton name="$parentFishingModeBeta" inherits="InterfaceOptionsCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentFishingModeAlpha" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_CHECKBOX;
						self.GetValue = Get_fishingMode2;
						self.label = "fishingMode2";
						self.setFunc = GrindLoot_FishingModeBeta_Update;
						self.defaultValue = 0;
						self.oldValue = 0;
						self.disabled = true;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
					</OnLoad>
				</Scripts>
			</CheckButton>
			<Frame name="$parentRarityLevelDropDown" inherits="UIDropDownMenuTemplate" enableMouse="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentFishingModeBeta" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="-13" y="-24"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentLabel" inherits="GameFontHighlight" text="Minimum desired rarity">
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
									<Offset>
										<AbsDimension x="16" y="3"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_DROPDOWN;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
						self:RegisterEvent("VARIABLES_LOADED");
					</OnLoad>
					<OnEnter>
						if ( not self.isDisabled ) then
							GameTooltip:SetOwner(self, "ANCHOR_TOPRIGHT");
							GameTooltip:SetText(self.tooltip, nil, nil, nil, nil, 1);
						end
					</OnEnter>
					<OnEvent function="GrindLoot_RarityLevelDropDown_OnEvent"/>
					<OnLeave function="GameTooltip_Hide"/>
				</Scripts>
			</Frame>					
			<Frame name="$parentClothLevelDropDown" inherits="UIDropDownMenuTemplate" enableMouse="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentFishingModeBeta" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="200" y="-24"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentLabel" inherits="GameFontHighlight" text="Minimum desired cloth">
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT">
									<Offset>
										<AbsDimension x="16" y="3"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						self.type = CONTROLTYPE_DROPDOWN;
						BlizzardOptionsPanel_RegisterControl(self, self:GetParent());
						self:RegisterEvent("VARIABLES_LOADED");
					</OnLoad>
					<OnEnter>
						if ( not self.isDisabled ) then
							GameTooltip:SetOwner(self, "ANCHOR_TOPRIGHT");
							GameTooltip:SetText(self.tooltip, nil, nil, nil, nil, 1);
						end
					</OnEnter>
					<OnEvent function="GrindLoot_ClothLevelDropDown_OnEvent"/>
					<OnLeave function="GameTooltip_Hide"/>
				</Scripts>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.name = "GrindLoot";
				self.options = GrindLootPanelOptions		
				
				BlizzardOptionsPanel_OnLoad(self, nil, GrindLootInterfaceOptionsPanel_Cancel, GrindLootInterfaceOptionsPanel_Default, GrindLootInterfaceOptionsPanel_Refresh);
				InterfaceOptions_AddCategory(self);

				
				UIDropDownMenu_EnableDropDown(GrindLootOptionsControlsPanelRarityLevelDropDown);
				UIDropDownMenu_EnableDropDown(GrindLootOptionsControlsPanelClothLevelDropDown);
				GrindLootConfigFrame_OnLoad();
				
				self:RegisterEvent("LOOT_OPENED");
				self:RegisterEvent("LOOT_CLOSED");
				self:RegisterEvent("VARIABLES_LOADED");
			</OnLoad>
			<OnEvent function="GrindLoot_OnEvent"/>
		</Scripts>	
	</Frame>
	
	
<Frame name="GrindLootBoxFrame" 
    toplevel="true" parent="UIParent" frameStrata="DIALOG" 
    hidden="true" enableMouse="true">
	<Size><AbsDimension x="200" y="64"/></Size>
	<Anchors><Anchor point="BOTTOMLEFT"><Offset><AbsDimension x="0" y="260"/></Offset></Anchor></Anchors>
	<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" 
		edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
		<BackgroundInsets>
			<AbsInset left="11" right="12" top="12" bottom="11"/>
		</BackgroundInsets>
		<TileSize><AbsValue val="32"/></TileSize>
		<EdgeSize><AbsValue val="32"/></EdgeSize>
	</Backdrop>

	<Layers>
		<Layer level="ARTWORK">
			<Texture file="Interface\DialogFrame\UI-DialogBox-Header">
				<Size><AbsDimension x="250" y="64"/></Size>
				<Anchors>
					<Anchor point="TOP">
					<Offset><AbsDimension x="0" y="12"/></Offset>
					</Anchor>
				</Anchors>
			</Texture>
		</Layer>
		<Layer level="OVERLAY">
			<FontString inherits="GameFontNormal" text="GrindLoot Status">
				<Anchors>
					<Anchor point="TOP" relativeTo="$parent"></Anchor>
				</Anchors>
			</FontString>
		</Layer>
	</Layers>

	<Frames>
	<Button name="GLEnableDisable" inherits="OptionsButtonTemplate" text="Disable">
		<Anchors>
			<Anchor point="BOTTOMRIGHT">
			<Offset><AbsDimension x="-12" y="16"/></Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnClick> GrindLoot_Disable(); </OnClick>
		</Scripts>
	</Button>
	<Button name="GLOpenOptions" inherits="OptionsButtonTemplate" text="Options">
		<Anchors>
			<Anchor point="BOTTOMLEFT">
			<Offset><AbsDimension x="13" y="16"/></Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnClick>GrindLootConfigFrame:Show(); </OnClick>
		</Scripts>
	</Button>	
	</Frames>
	<Scripts>
		<OnShow> GrindLootBoxFrame_OnShow(); </OnShow>
	 	<OnLoad> GrindLootBoxFrame_OnLoad(); </OnLoad>
	 	<OnEvent> GrindLoot_OnEvent(event,...); </OnEvent>
	</Scripts>
 </Frame>
	
</Ui>